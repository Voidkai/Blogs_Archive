# 比特币 Lightning Network（LN）笔记

> Lightning Network是一个去中心化的系统，用于即时、大批量的小额支付，消除了委托可信第三方保管资金的风险。

## 背景及简单介绍

![image-20201222155025200](.\image-20201222155025200.png)

比特币是如今使用最广泛的数字货币，它允许任何人发送价值，而不需要一个可信的中介或存管机构。比特币包含一个先进的脚本系统，使用户能够编写对资金的操作。不过，比特币也有一些去中心化设计的弊端。在比特币区块链上确认的交易需要最多一个小时，然后才不可逆转。微额支付，或少于几分钱的支付，缺乏一致性确认，导致这种交易在今天的网络上是不可行的。

The Lightning Network解决了这些问题。它是多方智能合约使用比特币内置脚本(可编程货币)的首次实现方式之一。The Lightning Network在使用比特币进行多方金融计算方面引领技术发展。

## The Lightning Network的特点

### 即时支付

比特币将交易聚合成间隔十分钟产生一个的区块上。交易在确认了六个区块后（大约一个小时），才被视为安全的比特币。在LN上，支付不需要区块确认，而且是即时和原子的。因此该网络可以用在零售点终端上，与用户设备到设备的交易，或任何需要即时支付的地方。

### 小额支付

新的市场可以通过小额支付的可能性来打开。LN使人们可以发送资金低至0.00000001比特币，无托管风险。比特币区块链目前执行的是最小产出的规模高出几百倍，而且每笔交易的固定费用，使得小额支付不切实际。LN允许以比特币计价的最小支付，使用实际的比特币交易。

### 可扩展性

比特币网络将需要支持数量级更高的交易量以满足来自自动支付的需求。即将到来的互联网连接设备的增加，需要一个平台来实现端对端支付和自动小额支付服务。LN的交易是通过区块链上不需要借助信任和所有权的委托，允许用户在其他设备之间进行近乎无限的交易。

## The Lightning Network工作原理

资金被放入一个双方多签名的 "通道 "比特币地址。这个通道被表示为比特币公共账本上的一个条目。为了从通道中花费资金，双方必须在新的余额上同意并达成一致。当前的余额是以双方最近一次签署的交易来存储的。要进行支付，双方要从通道中签署新的退出交易消费。如此一来，所有旧的退出交易均无效。
LN退出通道不需要交易方的配合。双方都有选择单方面关闭通道，结束他们的关系。由于各方都有多个多签名
渠道，在这个网络上有许多不同的用户，人们可以通过这个网络向任何其他方发送交易。
通过嵌入支付条件的安全加密哈希，支付可以通过通道网络进行，而不需要任何一方单方面保管资金的所有权。LN由于不需要保管信任和所有权实现了以前无法实现的、易受信任的金融系统垄断的那些功能。网络上的一切参与都可以是动态的。